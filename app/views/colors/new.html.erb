<img src="<%= @product.image.url %>" class="target-image"><br>
Dominant Color<br>
<div class="swatch-box" id="swatch"> </div><br>
<br><br>
Palette<br>
<div class="swatch-box" id="swatch0"> </div>
<div class="swatch-box" id="swatch1"> </div>
<div class="swatch-box" id="swatch2"> </div>
<div class="swatch-box" id="swatch3"> </div>
<div class="swatch-box" id="swatch4"> </div>
<div class="swatch-box" id="swatch5"> </div>
<div class="swatch-box" id="swatch6"> </div>
<div class="swatch-box" id="swatch7"> </div>
<div class="swatch-box" id="swatch8"> </div>

<h3>Add Color</h3>
<%= form_tag '/colors', method: :post do %>
  <%= label_tag :red %>
  <%= text_field_tag :red %><br>
  <%= label_tag :green %>
  <%= text_field_tag :green %><br>
  <%= label_tag :blue %>
  <%= text_field_tag :blue %><br>
  <%= submit_tag 'Finish', class: 'button' %><br><br>
<% end %>

<script type="text/javascript">
var image = document.querySelector('.target-image');
image.onload = function(){
  var colorThief = new ColorThief();
  var color = colorThief.getColor(image); 
  var palette = colorThief.getPalette(image);
  document.getElementById("swatch").style["background-color"] = 'rgb(' + color[0] + ',' + color[1] + ',' + color[2] + ')';

  console.log(color);
};
</script>